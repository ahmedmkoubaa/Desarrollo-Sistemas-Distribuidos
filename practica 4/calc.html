<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>Calculadora</title>
	</head>
	<body>
		<form action="javascript:void(0);" onsubmit="javascript:enviar();">
			Valor1: <input type="label" id="val1" /><br />
			Valor2: <input type="label" id="val2" /><br />
			
			Operaci&oacute;n:
			<select id="operacion">
				<option value="sumar">Sumar</option>
				<option value="restar">Restar</option>
				<option value="producto">Producto</option>
				<option value="dividir">Dividir</option>
			</select><br />
			
			<input type="submit" value="Calcular" />
		</form>
		<span id="resul"></span>
	</body>
	<script type="text/javascript">
		// obtener url con la que se nos ha llamado
		var serviceURL = document.URL;
		
		// enviar a dicha url la peticion (al servicio)
		function enviar() {
			var val1 = document.getElementById("val1").value;
			var val2 = document.getElementById("val2").value;
			var oper = document.getElementById("operacion").value;
			
			// genero mi URL de petici√≥n simple al servicio
			var url = serviceURL+"/"+oper+"/"+val1+"/"+val2;
			
			// creo una nueva peticion http
			var httpRequest = new XMLHttpRequest();
			
			// Definimos la funcion que lanzar cuando cambie el estado 
			// de la peticion que hemos definido
			httpRequest.onreadystatechange = function() {
			
				// Cuando el estado de la peticion sea HECHOs
		    	if (httpRequest.readyState === XMLHttpRequest.DONE){
		    	
		    		// Le asignamos el valor de respuesta al elemento "resul"
		        	var resultado = document.getElementById("resul");
		        	resultado.innerHTML = httpRequest.responseText;
		        }
		    };
		   
		   // Definimos datos de la peticion, GET, una URL a la 
		   // que hacer la peticion y asincrono a true
		   // Este true indica que la peticion es asincrona por lo que no hay que esperar conexion simultanea
			httpRequest.open("GET", url, true);
			
			// Mandamos la peticion e indicamos que el body es null (al ser un get es null)		
			httpRequest.send(null);
		}
	</script>
</html>


